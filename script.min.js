const savedTheme=localStorage.getItem("theme");savedTheme?document.documentElement.setAttribute("data-theme",savedTheme):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.setAttribute("data-theme","dark");function updateThemeIcon(){const e=document.querySelector(".theme-switch"),t=document.documentElement.getAttribute("data-theme");"dark"===t?e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>':e.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>'}function toggleTheme(){const e=document.documentElement,t=e.getAttribute("data-theme"),o="dark"===t?"light":"dark";e.setAttribute("data-theme",o),localStorage.setItem("theme",o),updateThemeIcon()}document.addEventListener("DOMContentLoaded",()=>{updateThemeIcon();const e=(new Date).getFullYear(),t=document.getElementById("current-year");t&&(t.textContent=e);const o=document.querySelectorAll(".tool-card"),n="/api/placeholder/64/64";o.forEach(e=>{const t=e.href,o=e.querySelector(".tool-logo");if(t&&o&&t!==window.location.href+"#")try{const e=new URL(t,window.location.origin).href,r=new URL(e).origin,a=`https://www.google.com/s2/favicons?sz=64&domain_url=${encodeURIComponent(r)}`;o.src=a,o.onerror=function(){this.onerror=null,this.src=n}}catch(e){console.error(`Failed to process URL: ${t}`,e),o.src=n}else o&&(o.src=n)});const r=document.getElementById("tools-container"),a=document.getElementById("favorites-section"),s=document.getElementById("favorites-grid"),l=document.getElementById("no-favorites-message"),i=document.querySelectorAll(".tool-card");function c(){const e=function(){const e=localStorage.getItem("aiHubFavorites");return e?JSON.parse(e):[]}();s.innerHTML="",document.querySelectorAll(".favorite-btn").forEach(e=>{e.textContent="☆",e.classList.remove("active"),e.setAttribute("aria-label","Add to favorites")}),0===e.length?(a.style.display="none",l.style.display="block"):(a.style.display="block",l.style.display="none",e.forEach(e=>{const t=document.querySelector(`.tool-card[data-tool-id="${e}"]`);if(t){const e=t.cloneNode(!0),o=e.querySelector(".favorite-btn");o&&(o.textContent="★",o.classList.add("active"),o.setAttribute("aria-label","Remove from favorites")),s.appendChild(e);const n=t.querySelector(".favorite-btn");n&&(n.textContent="★",n.classList.add("active"),n.setAttribute("aria-label","Remove from favorites"))}}))}function d(e){let t=function(){const e=localStorage.getItem("aiHubFavorites");return e?JSON.parse(e):[]}(),o=t.indexOf(e);o>-1?t.splice(o,1):t.push(e),function(e){localStorage.setItem("aiHubFavorites",JSON.stringify(e))}(t),c()}i.forEach(e=>{if(!e.dataset.toolId){const t=e.querySelector(".tool-name"),o=t?t.textContent:e.href;o&&(e.dataset.toolId=o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))}if(!e.querySelector(".favorite-btn")){const t=document.createElement("button");t.className="favorite-btn",t.setAttribute("aria-label","Add to favorites"),t.innerHTML="☆";const o=e.querySelector(".tool-logo");o?e.insertBefore(t,o):e.prepend(t)}}),document.querySelector(".container").addEventListener("click",e=>{if(e.target.classList.contains("favorite-btn")){e.preventDefault(),e.stopPropagation();const t=e.target.closest(".tool-card");t&&t.dataset.toolId&&d(t.dataset.toolId)}}),c(),window.addEventListener("load",function(){console.log("Window fully loaded - initializing all features");const e=function(){const e=14,t=new Date,o=document.querySelectorAll(".tool-card"),n=[];return o.forEach(o=>{const r=o.getAttribute("data-added");if(r){const a=new Date(r),s=Math.abs(t-a),l=Math.ceil(s/864e5);l<=e&&n.push({element:o,date:a})}}),n}();!function(e){e.forEach(e=>{if(!e.element.querySelector(".new-tool-badge")){const t=document.createElement("span");t.className="new-tool-badge",t.textContent="NEW",e.element.appendChild(t)}})}(e),function(e){if(e.length>0){const t=[...e].sort((e,t)=>t.date-e.date),o=document.createElement("div");o.className="category-section",o.id="recently-added-section";const n='\n                <h2 class="category-title">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>\n                    </svg>\n                    Recently Added\n                </h2>\n            ';o.innerHTML=n;const r=document.createElement("div");r.className="tools-grid",t.forEach(e=>{const t=e.element.cloneNode(!0);r.appendChild(t)}),o.appendChild(r);const a=document.getElementById("tools-container"),s=document.querySelector(".container");a&&s&&s.insertBefore(o,a)}}(e);const t=document.getElementById("search-input"),o=Array.from(document.querySelectorAll(".tool-card")),n=Array.from(document.querySelectorAll(".category-section"));let r=document.createElement("div");function a(){const e=t.value.trim().toLowerCase();if(console.log("Filtering for:",e),!e)return o.forEach(e=>e.style.display=""),n.forEach(e=>e.style.display=""),void(r.style.display="none");let a=0;if(o.forEach(t=>{const o=t.querySelector(".tool-name")?.textContent?.toLowerCase()||"",n=t.querySelector("img")?.getAttribute("alt")?.toLowerCase()||"",s=t.getAttribute("href")?.toLowerCase()||"";if("new"===e){const e=t.hasAttribute("data-added");return void(e?(t.style.display="",a++):(t.style.display="none"))}const l=/\bgemini\b/i,i=e.match(l)&&(o.match(l)||n.match(l)),c=i||o.includes(e)||n.includes(e)||s.includes(e);c?(t.style.display="",a++,console.log("Match found:",o||n)):(t.style.display="none")}),n.forEach(e=>{const t=e.querySelectorAll('.tool-card:not([style*="display: none"])');t.length>0?e.style.display="":e.style.display="none"}),0===a){r.style.display="block"}else r.style.display="none";console.log(`Found ${a} matches out of ${o.length} tools`)}r.id="no-results-notice",r.style.display="none",r.style.textAlign="center",r.style.padding="20px",r.style.margin="20px auto",r.style.color="var(--text-color)",r.style.backgroundColor="var(--card-background)",r.style.borderRadius="12px",r.style.boxShadow="0 2px 10px var(--shadow-color)",r.style.maxWidth="600px",r.textContent="No results found. Try a different search term.",document.querySelector(".container").insertBefore(r,document.getElementById("tools-container")),t&&(t.addEventListener("keypress",function(e){"Enter"===e.key&&a()}),t.addEventListener("input",function(){let e;clearTimeout(e),e=setTimeout(a,300)})),console.log("In-place filter functionality initialized successfully")})}); 